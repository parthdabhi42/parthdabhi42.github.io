<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <title>Parth</title>
    <script src="https://hammerjs.github.io/dist/hammer.js"></script>
    <style>
        #pinch-zoom-image-id {
            background: url(../images/image.jpg);
            height: 500px;
            /* width: 500px; */
            text-align: center;
            margin: 0 auto;
            background-size: contain;
        }

        .pinch-zoom-container {
            overflow: hidden;
            height: 900px;
        }

        .pinch-zoom-image {
            width: 100%;
        }
        h2 {
            margin: 0 auto;
            text-align: center;
        }
    </style>
</head>

<body>
    <h2>Welcome User...</h2>
    <div class="pinch-zoom-container">
        <div id="pinch-zoom-image-id" class="pinch-zoom-image">
        </div>
    </div>
</body>

</html>
<script>
    // document.getElementById("divId").addEventListener('gestureend', function (e) {
    //     if (e.scale < 1.0) {
    //         // User moved fingers closer together
    //         alert("zoom out");
    //     } else if (e.scale > 1.0) {
    //         // User moved fingers further apart
    //         alert("zoom in");
    //     }
    // }, false);
    var MIN_SCALE = 1;
    var MAX_SCALE = 64;
    var imgWidth = null;
    var imgHeight = null;
    var viewportWidth = null;
    var viewportHeight = null;
    var scale = null;
    var lastScale = null;
    var container = null;
    var img = null;
    var x = 0;
    var lastX = 0;
    var y = 0;
    var lastY = 0;
    var pinchCenter = null;
    var disableImgEventHandlers = function () {
        var events = ['onclick', 'onmousedown', 'onmousemove', 'onmouseout', 'onmouseover',
            'onmouseup', 'ondblclick', 'onfocus', 'onblur'];

        events.forEach(function (event) {
            img[event] = function () {
                return false;
            };
        });
    };
    var absolutePosition = function (el) {
        var x = 0,
            y = 0;

        while (el !== null) {
            x += el.offsetLeft;
            y += el.offsetTop;
            el = el.offsetParent;
        }

        return { x: x, y: y };
    };

    var restrictScale = function (scale) {
        if (scale < MIN_SCALE) {
            scale = MIN_SCALE;
        } else if (scale > MAX_SCALE) {
            scale = MAX_SCALE;
        }
        return scale;
    };

    var restrictRawPos = function (pos, viewportDim, imgDim) {
        if (pos < viewportDim / scale - imgDim) {
            pos = viewportDim / scale - imgDim;
        } else if (pos > 0) {
            pos = 0;
        }
        return pos;
    };

    var updateLastPos = function (deltaX, deltaY) {
        lastX = x;
        lastY = y;
    };

    var translate = function (deltaX, deltaY) {
        var newX = restrictRawPos(lastX + deltaX / scale,
            Math.min(viewportWidth, curWidth), imgWidth);
        x = newX;
        img.style.marginLeft = Math.ceil(newX * scale) + 'px';

        var newY = restrictRawPos(lastY + deltaY / scale,
            Math.min(viewportHeight, curHeight), imgHeight);
        y = newY;
        img.style.marginTop = Math.ceil(newY * scale) + 'px';
    };

    var zoom = function (scaleBy) {
        scale = restrictScale(lastScale * scaleBy);

        curWidth = imgWidth * scale;
        curHeight = imgHeight * scale;

        img.style.width = Math.ceil(curWidth) + 'px';
        img.style.height = Math.ceil(curHeight) + 'px';
        translate(0, 0);
    };

    var rawCenter = function (e) {
        var pos = absolutePosition(container);
        var scrollLeft = window.pageXOffset ? window.pageXOffset : document.body.scrollLeft;
        var scrollTop = window.pageYOffset ? window.pageYOffset : document.body.scrollTop;

        var zoomX = -x + (e.center.x - pos.x + scrollLeft) / scale;
        var zoomY = -y + (e.center.y - pos.y + scrollTop) / scale;

        return { x: zoomX, y: zoomY };
    };

    var updateLastScale = function () {
        lastScale = scale;
    };

    var zoomAround = function (scaleBy, rawZoomX, rawZoomY, doNotUpdateLast) {
        zoom(scaleBy);
        var rawCenterX = -x + Math.min(viewportWidth, curWidth) / 2 / scale;
        var rawCenterY = -y + Math.min(viewportHeight, curHeight) / 2 / scale;
        var deltaX = (rawCenterX - rawZoomX) * scale;
        var deltaY = (rawCenterY - rawZoomY) * scale;

        translate(deltaX, deltaY);

        if (!doNotUpdateLast) {
            updateLastScale();
            updateLastPos();
        }
    };

    var zoomCenter = function (scaleBy) {
        var zoomX = -x + Math.min(viewportWidth, curWidth) / 2 / scale;
        var zoomY = -y + Math.min(viewportHeight, curHeight) / 2 / scale;

        zoomAround(scaleBy, zoomX, zoomY);
    };

    var zoomIn = function () {
        zoomCenter(2);
    };

    var zoomOut = function () {
        zoomCenter(1 / 2);
    };

    var onLoad = function () {
        img = document.getElementById('pinch-zoom-image-id');
        container = img.parentElement;

        disableImgEventHandlers();

        imgWidth = img.width;
        imgHeight = img.height;
        viewportWidth = img.offsetWidth;
        scale = viewportWidth / imgWidth;
        lastScale = scale;
        viewportHeight = img.parentElement.offsetHeight;
        curWidth = imgWidth * scale;
        curHeight = imgHeight * scale;

        var hammer = new Hammer(container, {
            domEvents: true
        });

        hammer.get('pinch').set({
            enable: true
        });

        hammer.on('pan', function (e) {
            translate(e.deltaX, e.deltaY);
        });

        hammer.on('panend', function (e) {
            updateLastPos();
        });

        hammer.on('pinch', function (e) {
            if (pinchCenter === null) {
                pinchCenter = rawCenter(e);
                var offsetX = pinchCenter.x * scale - (-x * scale + Math.min(viewportWidth, curWidth) / 2);
                var offsetY = pinchCenter.y * scale - (-y * scale + Math.min(viewportHeight, curHeight) / 2);
                pinchCenterOffset = { x: offsetX, y: offsetY };
            }
            var newScale = restrictScale(scale * e.scale);
            var zoomX = pinchCenter.x * newScale - pinchCenterOffset.x;
            var zoomY = pinchCenter.y * newScale - pinchCenterOffset.y;
            var zoomCenter = { x: zoomX / newScale, y: zoomY / newScale };

            zoomAround(e.scale, zoomCenter.x, zoomCenter.y, true);
        });

        hammer.on('pinchend', function (e) {
            updateLastScale();
            updateLastPos();
            pinchCenter = null;
        });

        hammer.on('doubletap', function (e) {
            var c = rawCenter(e);
            zoomAround(2, c.x, c.y);
        });

    };
</script>
